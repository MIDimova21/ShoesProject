{% extends "base.html" %}

{% block link %}
        <link rel="stylesheet" href="{{ url_for('static', filename='base.css') }}">
        <link rel="stylesheet" href="{{ url_for('static', filename='catalog.css') }}">
{% endblock %}

{% block content %}
<h2 class="page-title">Каталог с продукти</h2>

<form class="filter-bar" method="get" action="{{ url_for('catalog.show_catalog') }}">
  <h1 class="filter">Филтри:</h1>
  <label>Цена:</label>
  <input type="number" name="max_price" value="{{ max_price or '' }}">

  <label>Размер:</label>
  <input type="text" name="available_size" value="{{ max_size or '' }}">

  <label>
    <input class="checkbox" type="checkbox" name="in_stock" {% if in_stock %}checked{% endif %}>
    Само налични
  </label>

  <button type="submit">Филтрирай</button>
</form>

<hr>

<div class="catalog-grid">
  {% for product in products %}
    <div class="product-card">
      <h3 class="product-title">{{ product.name }}</h3>
      <p class="product-meta">{{ product.color }}</p>
      <p class="product-meta">Sizes: {{ product.sizes }}</p>
      <p class="product-meta">Stock: {{ product.stock }}</p>
      <p class="product-price">${{ product.price }}</p>

      <div class="product-actions">
        {% if session.logged_in %}
          <a class="btn-add" href="{{ url_for('cart.add_to_cart', product_id=product.id) }}">Add to Cart</a>
        {% else %}
          <a class="btn-add" href="{{ url_for('auth.login') }}">Login to Buy</a>
        {% endif %}
      </div>

    </div>
    <hr>
  {% endfor %}
</div>
{% endblock %}