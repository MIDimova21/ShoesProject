<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ShoeBox</title>

<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />

    {% block link %}
        <link rel="stylesheet" href="{{ url_for('static', filename='base.css') }}">
    {% endblock %}

</head>
<body>
    <header>
        <nav>
          <div class="container_nav">
            <div class="nav-left">
              <a href="{{ url_for('catalog.show_catalog') }}"><h1>ShoeBox</h1></a>

              {% if current_user.is_authenticated and request.endpoint == 'catalog.show_catalog'%}
                <form class="search" method="GET" action="{{ url_for('catalog.show_catalog') }}">
                  <input type="text" name="query" placeholder="–¢—ä—Ä—Å–∏..." value="{{ search_query or '' }}">
                  <button class="search" type="submit">–¢—ä—Ä—Å–∏</button>
                </form>
              {% endif %}
            </div>
            <div class="nav-right">
              {% if current_user.is_authenticated %}
                <a href="{{ url_for('catalog.show_catalog') }}">–ö–∞—Ç–∞–ª–æ–≥</a>
                <a href="{{ url_for('cart.show_cart') }}">üõí –ö–æ–ª–∏—á–∫–∞</a>
                <a href="{{ url_for('calendar.calendar') }}">–ö–∞–ª–µ–Ω–¥–∞—Ä</a>

                <a class="nav-link" href="{{ url_for('auth.profile') }}">
                    {% if current_user.is_picture_approved == True %}
                    <div class="profile-picture-container">
                        <img src="{{ url_for('static', filename='images/' ~ current_user.first_name ~ '_pfp.png') }}"
                           onerror="this.src='{{ url_for('static', filename='images/account.png') }}'"
                           alt="Profile Picture"
                           class="rounded-circle me-2"
                           style="width: 40px; height: 40px; object-fit: cover;">
                        {{ current_user.first_name }}
                    </div>
                    {% else %}
                    <div class="profile-picture-container">
                        <img src="{{ url_for('static', filename='images/account.png') }}"
                             alt="Profile Picture"
                           class="rounded-circle me-2"
                           style="width: 40px; height: 40px; object-fit: cover;">
                        {{ current_user.first_name }}
                    </div>
                    {% endif %}
                </a>

                {% if current_user.is_admin %}
                  <a href="{{ url_for('admin.manage_products') }}">‚öôÔ∏è –ê–¥–º–∏–Ω</a>
                {% endif %}
                <a href="{{ url_for('auth.logout') }}">–ò–∑—Ö–æ–¥</a>
              {% else %}
                <a href="{{ url_for('auth.register') }}">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
                <a href="{{ url_for('auth.login') }}">–í—Ö–æ–¥</a>
                <a href="{{ url_for('catalog.show_catalog') }}">–ö–∞—Ç–∞–ª–æ–≥</a>
              {% endif %}
            </div>
          </div>
        </nav>
        <hr>
    </header>

    <main>
        {% block content %}{% endblock %}
    </main>

    <footer>
        <p>&copy; 2025 Sho–µBox</p>
    </footer>
</body>
</html>